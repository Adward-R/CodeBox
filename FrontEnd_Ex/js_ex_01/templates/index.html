<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Tab Demo</title>
	<!-- 新 Bootstrap 核心 CSS 文件 -->
	<link rel="stylesheet" href="http:////cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
	<script src="http://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
	<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
	<script src="http://cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	
	<script>
		var navTree = {
			"tab-1": {
				"tab-1-1": {
					"tab-1-1-1": {"01.jpg": undefined}
					},
				"tab-1-2": {
					"tab-1-2-1": {"02.jpg": undefined}
					},
				"tab-1-3": {
					"tab-1-3-1": {"03.jpg": undefined},
					"tab-1-3-2": {"04.jpg": undefined}
					}
			},
			"tab-2": {
				"tab-2-1": {
					"tab-2-1-1": {"05.jpg": undefined},
					"tab-2-1-2": {"06.jpg": undefined}
					},
				"tab-2-2": {
					"tab-2-2-1": {"07.jpg": undefined}
					}
			}
		};
		
		navDict = {};
		(function(navTree, navDict) {
			function navTreeToDict(node, keyname) {
				for (var key in node) {
					navDict[keyname].push(key);
					navDict[key] = [];
					navTreeToDict(node[key], key);
				}			
			}
			
			for (var key in navTree) {
				navDict[key] = [];
				navTreeToDict(navTree[key], key);	
			}
			for (var key in navDict) {
				if (navDict[key].length == 0) delete navDict[key];
			}
		})(navTree, navDict);
		
		console.log(navDict);
		
		function insNav2(tab_id) {
			$("#nav-3").empty();
			$("#nav-2").empty();
			for (i in navDict[tab_id]) {
				var next_tab_id = navDict[tab_id][i];
				var next_tab = $("<li><a href='#' onclick='insNav3(\""+next_tab_id+"\")'>"+next_tab_id+"</a></li>");
				$("#nav-2").append(next_tab);
			}
		}
		
		function insNav3(tab_id) {
			$("#nav-3").empty();
			for (i in navDict[tab_id]) {
				var next_tab_id = navDict[tab_id][i];
				var next_tab = $("<button class=\"btn btn-default\" onclick='insImg(\""+next_tab_id+"\")'>"+next_tab_id+"</button>");
				$("#nav-3").append(next_tab);
			}
		}
		
		function insImg(tab_id) {
			//$("#pic-disp").empty();
			$.get('/get_rand_img/',
					{'tab_id': tab_id},
					function(data) {
						$("#pic-disp").empty();
						var newImg = $('<img src="'+data['img_link']+'">')
						$("#pic-disp").append(newImg);
					});
		}
		
	</script>
</head>
<body>	

<div class="container">
	<div class="row"><div class="col-xs-12">
		<nav class="navbar navbar-default">
			<div class="container-fluid">
				<div class="collapse navbar-collapse">
					<ul class="nav navbar-nav" id="nav-1">
						<li>
							<a class="btn btn-default" href="#" onmouseover='insNav2("tab-1")'>tab-1</a>
						</li>
						<li>
							<a class="btn btn-default" href="#" onmouseover='insNav2("tab-2")'>tab-2</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>
	</div></div>
	
	<div class="row"><div class="col-xs-12">
		<nav class="navbar navbar-default">
			<div class="container-fluid">
				<div class="collapse navbar-collapse">
					<ul class="nav navbar-nav" id="nav-2">
					</ul>
				</div>
			</div>
		</nav>
	</div></div>


	<div class="row">
		<div class="col-xs-3">
			<div class="container-fluid">
				<div class="btn-group-vertical" id="nav-3"></div>
			</div>
		</div>
		
		<div class="col-xs-9">
			<div>
				<a class="thumbnail" id="pic-disp">
					<img src="http://p1.music.126.net/2cqdFxYkkozhOFCGiu1hLA==/620124558086895.jpg">
				</a>
			</div>
		</div>
	</div>

</body>
</html>